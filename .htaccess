# ----------------------------------------
# Force HTTPS
# ----------------------------------------
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteCond %{HTTPS} !=on
  RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]
</IfModule>

# ----------------------------------------
# MIME Type Handling
# ----------------------------------------
AddType application/javascript .js
AddType text/css .css
AddType font/woff2 .woff2

# ----------------------------------------
# React Router Support (SPA Routing)
# ----------------------------------------
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>

# ----------------------------------------
# Security Headers
# ----------------------------------------
<IfModule mod_headers.c>
  Header set Content-Security-Policy "default-src 'self'; font-src 'self' data:; script-src 'self' https://www.google.com https://www.gstatic.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; frame-ancestors 'none';"
  Header set X-Content-Type-Options "nosniff"
  Header set Strict-Transport-Security "max-age=31536000; includeSubDomains" env=HTTPS
</IfModule>

# ----------------------------------------
# Disable Directory Listing
# ----------------------------------------
Options -Indexes

# ----------------------------------------
# Cache Control for Static Assets
# ----------------------------------------
<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|svg|woff|woff2|ttf|eot)$">
  Header set Cache-Control "max-age=31536000, public"
</FilesMatch>

